/*
 * This file was generated by the Gradle 'init' task.
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

 task ang_prod_build {
     doLast {
         println 'Building angular for production'
         def a="gradle :client-sdlc:npm_run_build_--_--prod"
         def b=a.execute()
         b.waitFor()
     }
 }

task copy_task {
        copy_task.dependsOn 'ang_prod_build'
     doLast {
         def a="gradle :move_ang_prod"
         def b=a.execute()
         b.waitFor()
    }
}

task move_ang_prod(type: Copy) {
         println 'Moving files to spring boot project'
         from "client-sdlc/dist/client-sdlc"
         into "sdlc/src/main/resources/static"
}

task spring_prod_war {
     spring_prod_war.dependsOn 'copy_task'
     doLast {
         println 'Building spring boot war'
         def a="gradle :sdlc:bootWar"
         def b=a.execute()
         b.waitFor()
     }
}

task spring_prod_jar {
	spring_prod_jar.dependsOn 'copy_task'
	doLast {
		println 'Building spring boot jar'
		def a="gradle :sdlc:bootJar"
		def b=a.execute()
		b.waitFor()
	}
}

task build_prod_war {
      build_prod_war.dependsOn 'spring_prod_war'
      doLast {
         println 'War is ready !!!'
      }
}

task build_prod_jar {
	build_prod_jar.dependsOn 'spring_prod_jar'
	doLast {
		println 'Jar is ready !!!'
	}
}
